이번 포스팅은 다음의 링크를 참고하여 작성되었다.
- [링크1](https://dsnight.tistory.com/50)

# 동적 메모리 할당
동적 할당 이란?
- 프로그램이 실행되고 있는 동안에도 메모리를 필요한 만큼 요청하는 것을 의미

## C언어의 메모리 구조
데이터 영역, 스택 영역, 힙 영역으로 구성

![](/ch14/01.png)

(출처: [https://dsnight.tistory.com/50](https://dsnight.tistory.com/50))

### 데이터(Data) 영역
- `전역 변수`, `Static 변수`가 저장
- 프로그램 시작시에 메모리에 할당, 종료시에 메모리에서 소멸

### 스택(Stack) 영역
- 함수 호출시에 생성되는 `지역 변수` 및 `매개 변수`가 저장
- 함수 호출이 완료되면 메모리에서 소멸

```c++
#include <stdio.h>

void fct1(int);
void fct2(int);

int a = 10;	// 데이터 영역에 할당
int b = 20;	// 데이터 영역에 할당

int main() {
    int i = 100;	// 지역변수 i가 스택 영역에 할당
    fct1(i);
    fct2(i);
    return 0;
}

void fct1(int c) {
    int d = 30;	// 매개변수 c와 지역변수 d가 스택영역에 할당
}

void fct2(int e) {
    int f = 40;	// 매개변수 e와 지역변수 f가 스택영역에 할당
}
```

![](/ch14/02.png)

(출처: [https://dsnight.tistory.com/50](https://dsnight.tistory.com/50))

### 힙(Heap) 영역
- 필요시에 동적으로 메모리를 할당할 때 사용
- `런타임`때 유용하게 사용됨

### 힙 영역의 필요성?
메모리 구조상 배열의 길이는 항상 상수여야 함

```c++
int main() {
    // 정상적인 배열선언
    int arr[10];
    
    // 비 정상적인 배열선언
    int i = 0;
    scanf("%d", &i);
    int arr[i];
    return 0;
}
```

다음과 같은 방법 역시 비정상적인 방법... `컴파일 에러`가 발생!

```c++
int main() {
    int i = 10;
    int arr[i];
    return 0;
}
```

그 이유?
- `컴파일`을 하는 동안에는 `i`가 4바이트라는 것만 알 수 있음
- `i`가 10으로 할당된다는 사실은 `런타임`에 결정됨!

즉, 사용자의 요구에 맞게 메모리를 할당하기 위해서는 `런타임`에 메모리를 결정해야 함!

